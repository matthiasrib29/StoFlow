---
phase: 05-frontend-ui
type: execute
plan: 02
---

<objective>
Integrate TextGeneratorButton and TextPreviewModal into product create and edit pages.

Purpose: Enable users to generate SEO titles and descriptions directly from the product form.
Output: Fully functional text generation feature accessible from both product create and edit workflows.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-frontend-ui/05-01-SUMMARY.md
@frontend/components/products/TextGeneratorButton.vue
@frontend/components/products/TextPreviewModal.vue
@frontend/composables/useProductTextGenerator.ts
@frontend/components/products/ProductEditorPage.vue
@frontend/components/products/forms/ProductFormInfo.vue
@frontend/pages/dashboard/products/create.vue
@frontend/pages/dashboard/products/[id]/edit.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add text generation to ProductFormInfo section</name>
  <files>frontend/components/products/forms/ProductFormInfo.vue</files>
  <action>
Integrate TextGeneratorButton next to the title and description fields:

1. Add TextGeneratorButton after the title field:
   - Position: inline with title label or as a small button next to the field
   - Pass current form attributes for preview mode (before product is saved)
   - On generate success: open TextPreviewModal

2. Add TextPreviewModal to the component:
   - Bind :visible with v-model to local ref
   - Pass titles/descriptions from useProductTextGenerator
   - Handle @select-title: update form.title with selected value
   - Handle @select-description: update form.description with selected value
   - Handle @apply-all: update both title and description

3. Use useProductTextGenerator composable:
   - Call preview(attributes) with current form values
   - Build TextPreviewInput from form: brand, category, gender, size_normalized, colors, material, condition, etc.
   - Show loading state on button during generation

Implementation notes:
- Button should be subtle (small, secondary style) to not distract from main form
- Consider adding "Generer" text or just an icon with tooltip
- Emit form updates via existing @update:model-value pattern
  </action>
  <verify>TypeScript compilation passes with `cd frontend && npm run typecheck`</verify>
  <done>TextGeneratorButton and Modal integrated into ProductFormInfo with form binding</done>
</task>

<task type="auto">
  <name>Task 2: Handle text generation in edit mode with product ID</name>
  <files>frontend/components/products/ProductEditorPage.vue</files>
  <action>
For edit mode, enable generation from saved product data:

1. Check if ProductFormInfo already handles both modes, if so this task may be minimal
2. If needed, add alternative flow for edit mode:
   - When product.id exists, can use generate(productId) instead of preview(attributes)
   - This uses saved product data from database (more complete)

3. Ensure form updates work correctly:
   - Title/description updates should trigger auto-save in edit mode
   - Updates should be reflected in form state immediately

4. Optional enhancement (if time permits):
   - Add "Regenerer" capability if results aren't satisfactory
   - Show which format/style was used for current title (if generated)

Note: Most logic should already be in ProductFormInfo. This task ensures edit mode works correctly with product ID based generation.
  </action>
  <verify>TypeScript compilation passes with `cd frontend && npm run typecheck`</verify>
  <done>Edit mode supports text generation with product ID, auto-save triggers on selection</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete text generation feature integrated into product create and edit pages</what-built>
  <how-to-verify>
    1. Start dev server: `/1-dev` (or verify running)
    2. Test CREATE flow:
       a. Go to /dashboard/products/create
       b. Fill in some product attributes (brand, category, condition)
       c. Click the generate button near title/description
       d. Verify modal opens with generated titles and descriptions
       e. Select a title and click "Utiliser ce titre"
       f. Verify form title field updates
       g. Select a description and verify it updates
       h. Try "Appliquer les deux" button
    3. Test EDIT flow:
       a. Go to /dashboard/products/[id]/edit (existing product)
       b. Click generate button
       c. Verify generation works with product ID
       d. Select and apply - verify auto-save triggers
    4. Test error states:
       a. Try generating with minimal/no attributes
       b. Verify error message displays in modal
    5. TypeScript: `cd frontend && npm run typecheck`
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd frontend && npm run typecheck` passes
- [ ] Create page: generate button visible and functional
- [ ] Edit page: generate button visible and functional
- [ ] Modal opens and displays generated content
- [ ] Selecting title/description updates form correctly
- [ ] Auto-save triggers in edit mode after selection
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Feature fully functional in both create and edit workflows
- Phase 5 (Frontend UI) complete
</success_criteria>

<output>
After completion, create `.planning/phases/05-frontend-ui/05-02-SUMMARY.md`

Then update:
- `.planning/STATE.md` - Mark phase 5 complete, progress 100%
- `.planning/ROADMAP.md` - Mark phase 5 complete with date
</output>
