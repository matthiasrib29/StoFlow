---
phase: 05-frontend-ui
type: execute
plan: 01
---

<objective>
Create TextGeneratorButton and TextPreviewModal components for the product text generation feature.

Purpose: Provide UI components that let users generate and preview SEO-optimized titles and descriptions.
Output: Two Vue components ready for integration into product create/edit pages.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-frontend-composable/04-01-SUMMARY.md
@frontend/composables/useProductTextGenerator.ts
@frontend/types/textGenerator.ts
@frontend/components/products/EditorFooter.vue
@frontend/components/ebay/PriceModal.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TextGeneratorButton component</name>
  <files>frontend/components/products/TextGeneratorButton.vue</files>
  <action>
Create a button component that triggers text generation with these features:
- Props: `productId` (number, optional), `attributes` (TextPreviewInput, optional), `disabled` (boolean)
- Emits: `generate` event with generation results
- Uses useProductTextGenerator composable internally
- Shows loading spinner when generating (use :loading on Button)
- Two modes:
  1. If productId provided: calls generate(productId)
  2. If attributes provided: calls preview(attributes)
- Button style: secondary style (bg-gray-200 hover:bg-gray-300) with icon "pi pi-sparkles" (or pi-bolt)
- Label: "Generer textes" or slot for custom label
- Tooltip explaining the feature when hovered

Follow existing button patterns from EditorFooter.vue:
- Use PrimeVue Button component
- Include :disabled state handling
- Add loading state feedback
  </action>
  <verify>TypeScript compilation passes with `cd frontend && npm run typecheck`</verify>
  <done>Component created with props, emits, loading state, and both generate modes</done>
</task>

<task type="auto">
  <name>Task 2: Create TextPreviewModal component</name>
  <files>frontend/components/products/TextPreviewModal.vue</files>
  <action>
Create a modal dialog to display and select generated titles/descriptions:
- Props:
  - `visible` (boolean, v-model)
  - `titles` (Record&lt;string, string&gt;)
  - `descriptions` (Record&lt;string, string&gt;)
  - `loading` (boolean)
  - `error` (string | null)
- Emits:
  - `update:visible` for v-model
  - `select-title` with selected format key
  - `select-description` with selected style key
  - `apply-all` with { titleFormat: string, descriptionStyle: string }

UI Structure following PrimeVue Dialog pattern (like EbayPriceModal.vue):
- Header: "Textes generes" with optional icon
- Two sections side by side (grid cols-2 on md+):
  1. Titles section:
     - Subtitle: "Titres" with format labels
     - Each title in a card/box with format name (from TITLE_FORMAT_LABELS)
     - Radio selection or click to select
     - Copy button for each title
     - "Utiliser ce titre" button
  2. Descriptions section:
     - Subtitle: "Descriptions" with style labels
     - Each description in a card/box with style name (from DESCRIPTION_STYLE_LABELS)
     - Radio selection or click to select
     - Copy button for each description
     - "Utiliser cette description" button
- Footer:
  - "Fermer" button (secondary)
  - "Appliquer les deux" button (primary) - applies selected title + description
- Loading state: show ProgressSpinner centered when loading=true
- Error state: show Message component with error text when error is set
- Empty state: show helpful message if no results

Use Tailwind classes consistent with existing modals:
- Dialog width: 800px or 90vw max
- Card styling: border border-gray-200 rounded-lg p-4
- Selection highlight: ring-2 ring-primary-400 bg-primary-50
  </action>
  <verify>TypeScript compilation passes with `cd frontend && npm run typecheck`</verify>
  <done>Modal component created with two-column layout, selection state, and all emit handlers</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>TextGeneratorButton and TextPreviewModal components for product text generation</what-built>
  <how-to-verify>
    1. Start dev server if not running: `/1-dev` or check existing
    2. Temporarily add components to a test page to verify rendering:
       - Button renders with correct styling and loading state
       - Modal opens/closes correctly
       - Modal displays sample titles/descriptions in two columns
       - Selection highlighting works
       - Copy buttons work
       - Apply buttons emit correct events
    3. Check TypeScript: `cd frontend && npm run typecheck`
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd frontend && npm run typecheck` passes
- [ ] TextGeneratorButton component exists with correct props/emits
- [ ] TextPreviewModal component exists with two-column layout
- [ ] Both components follow existing PrimeVue/Tailwind patterns
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Components ready for integration in Plan 05-02
</success_criteria>

<output>
After completion, create `.planning/phases/05-frontend-ui/05-01-SUMMARY.md`
</output>
